{"version":3,"sources":["/dist/approve.js"],"names":["global","factory","exports","module","define","amd","approve","this","Card","scheme","valid","Score","strength","points","isMinimum","hasLower","hasUpper","hasNumber","hasSpecial","isBonus","percent","errors","cc","message","schemes","regex","_getScheme","value","replace","i","length","test","validate","ca","card","sum","mul","charAt","minimum","minimumBonus","strengths","0","1","2","3","4","5","6","expects","_getScore","text","result","match","Math","ceil","_getStrength","push","pars","min","bonus","hasOwnProperty","config","messages","tests","fixedSizeNumeric","num","number","username","uname","required","email","url","alphaNumeric","numeric","alpha","decimal","currency","ip","ipv4","ipv4Cidr","ipv6","ipv6Cidr","max","range","equal","format","Object","prototype","toString","call","time","date","formats","ymd","dmy","truthy","falsy","Result","approved","failed","each","callback","isFunc","constructor","apply","filter","_format","col","Array","slice","arguments","m","n","trim","_isRule","rule","props","indexOf","_start","rules","title","stop","constraint","params","_test","args","_getArgs","ret","_formatMessages","concat","prop","_formatMessage","_eachExpected","fn","isArray","expectsLength","_getFormat","addTest","obj","name","e"],"mappings":"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","file":"approve.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.approve = factory());\n}(this, (function () { 'use strict';\n\n/**\n * The result object containing the outcome of the credit card test.\n */\nfunction Card() {\n    this.scheme = '';\n    this.valid = false;\n}\n\n/** \n * Checks if a value is a valid credit card.\n */\nvar cc = {\n    /**\n     * The default error message.\n     */\n    message: '{title} is not a valid credit card number',\n    schemes: [\n        {\n            regex: /^(5610|560221|560222|560223|560224|560225)/,\n            scheme: 'Australian Bank Card'\n        },\n        {\n            regex: /^(2014|2149)/,\n            scheme: 'Diner\\'s Club'\n        },\n        {\n            regex: /^36/,\n            scheme: 'Diner\\'s Club International'\n        },\n        {\n            regex: /^(30[0-5]|36|38|54|55|2014|2149)/,\n            scheme: 'Diner\\'s Club / Carte Blanche'\n        },\n        {\n            regex: /^35(2[89]|[3-8][0-9])/,\n            scheme: 'Japanese Credit Bureau'\n        },\n        {\n            regex: /^(5018|5020|5038|6304|6759|676[1-3])/,\n            scheme: 'Maestro'\n        },\n        {\n            regex: /^5[1-5]/,\n            scheme: 'Mastercard'\n        },\n        {\n            regex: /^(6304|670[69]|6771)/,\n            scheme: 'Laser'\n        },\n        {\n            regex: /^(6334|6767)/,\n            scheme: 'Solo (Paymentech)'\n        },\n        {\n            regex: /^(6011|622|64|65)/,\n            scheme: 'Discover'\n        },\n        {\n            regex: /^3[47]/,\n            scheme: 'American Express'\n        },\n        {\n            regex: /^(4026|417500|4508|4844|491(3|7))/,\n            scheme: 'Visa Electron'\n        },\n        {\n            regex: /^(4)/,\n            scheme: 'Visa'\n        }\n    ],\n    /**\n     * Returns the name of the credit card scheme.\n     * @param {Object} value - The credit card number to test.\n     * @return {Object} The result of the test.\n     */\n    _getScheme: function(value) {\n        value = (''+ value).replace(/\\D/g, '');\n\n        var i = this.schemes.length;\n        while (i--) {\n            if (this.schemes[i].regex.test(value)) {\n                return this.schemes[i].scheme;\n            }\n        }\n\n        return undefined;\n    },\n    /**\n     * The method that is called by ApproveJs to perform the test.\n     * @param {Object} value - The value to test.\n     * @return {Object} The result object of the test.\n     */\n    validate: function(value) {\n        value = (''+ value).replace(/\\D/g, '');\n\n        var card = new Card(), \n            i = value.length,\n            sum = 0,\n            mul = 1,\n            ca;\n\n        // Not enough numbers. Shortest currently is 12. \n        if (i < 12) {\n            return false;\n        }\n\n        while (i--) {\n            ca = value.charAt(i) * mul;\n            sum += ca - (ca > 9) * 9;\n            mul ^= 3;\n        }\n\n        card.valid = (sum % 10 === 0) && (sum > 0);\n        card.scheme = this._getScheme(value);\n\n        return card;\n    }\n};\n\n/**\n * The result object containing the outcome of the strength test.\n */\nfunction Score(strength) {\n    this.strength = strength;\n    this.points = 0;\n    this.isMinimum = false;\n    this.hasLower = false;\n    this.hasUpper = false;\n    this.hasNumber = false;\n    this.hasSpecial = false;\n    this.isBonus = false;\n    this.percent = 0;\n    this.valid = false;\n    this.errors = [];\n}\n/** \n * Checks if a value is a strong password string.\n */\nvar strength = {\n    /**\n     * The minimum length a password must be.\n     */\n    minimum: 8,\n    /**\n     * The minimum length a password must be for a bonus point.\n     */\n    minimumBonus: 10,\n    /**\n     * The text representing the strength of a password.\n     */\n    strengths: {\n        0: 'Very Weak',\n        1: 'Weak',\n        2: 'Better',\n        3: 'Almost',\n        4: 'Acceptable',\n        5: 'Strong',\n        6: 'Very Strong'\n    },\n    /**\n     * The default error message.\n     */\n    message: '{title} did not pass the strength test.',\n    /**\n     * Expects the 'min' and 'bonus' parameters.\n     */\n    expects: ['min', 'bonus'],\n    /**\n     * Default error messages\n     */\n    errors: {\n        isMinimum: '{title} must be at least {min} characters',\n        hasLower: '{title} must have at least 1 lower case character',\n        hasUpper: '{title} must have at least 1 upper case character',\n        hasNumber: '{title} must have at least 1 number',\n        hasSpecial: '{title} must have at least 1 special character'\n    },\n    /**\n     * Returns an object containing the score of a value.\n     */\n    _getScore: function(text) {\n        // Create the object that represents the score of the text\n        var result = new Score(this.strengths[0]);\n        // If text is longer than minimum give 1 point.\n        // If text is longer than minimumBonus give another 1 point.\n        if (text.length > this.minimumBonus) {\n            result.points += 2;\n            result.isBonus = true;\n            result.isMinimum = true;\n        } else if (text.length > this.minimum){\n            result.points++;\n            result.isMinimum = true;\n        } else {\n            result.points = 1;\n            result.isMinimum = false;\n        }\n        // If text has lowercase characters give 1 point.\n        result.hasLower = text.match(/[a-z]/) === null ? false : true;\n        if(result.isMinimum && result.hasLower) {\n            result.points++;\n        }\n        // If text has uppercase characters give 1 point.\n        result.hasUpper = text.match(/[A-Z]/) === null ? false : true;\n        if(result.isMinimum && result.hasUpper) {\n            result.points++;\n        }\n        // If text has at least one number give 1 point.\n        result.hasNumber = text.match(/\\d+/) === null ? false : true;\n        if(result.isMinimum && result.hasNumber) {\n            result.points++;\n        }\n        // If text has at least one special caracther give 1 point.\n        result.hasSpecial = text.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/) === null ? false : true;\n        if(result.isMinimum && result.hasSpecial) {\n            result.points++;\n        }\n        // Set the percentage value.\n        result.percent = Math.ceil((result.points / 6) * 100);\n        // Return the score object.\n        return result;\n    },\n    /**\n     * Returns an object containing the score and validation of a value.\n     */\n    _getStrength: function (text) {\n        var result = this._getScore(text);\n        result.strength = this.strengths[result.points];\n        if (!result.isMinimum) {\n            result.errors.push(this.errors.isMinimum);\n        }\n        if (!result.hasLower) {\n            result.errors.push(this.errors.hasLower);\n        }\n        if (!result.hasUpper) {\n            result.errors.push(this.errors.hasUpper);\n        }\n        if (!result.hasSpecial) {\n            result.errors.push(this.errors.hasSpecial);\n        }\n        if (!result.hasNumber) {\n            result.errors.push(this.errors.hasNumber);\n        }\n        if (result.points > 4) {\n          result.valid = true;\n        } \n        return result;\n    },\n    /**\n     * The method that is called by ApproveJs to perform the test.\n     */\n    validate: function(value, pars) {\n        this.minimum = pars.min || this.minimum;\n        this.minimumBonus = pars.bonus || this.minimumBonus;\n        if (pars.hasOwnProperty('config') && pars.config.hasOwnProperty('messages')) {\n            for (var message in pars.config.messages) {\n                if (pars.config.messages.hasOwnProperty(message)) {\n                    this.errors[message] = pars.config.messages[message];\n                }\n            }\n        }\n        return this._getStrength(value);\n    }\n};\n\nvar tests = {\n\n\tfixedSizeNumeric: {\n\t\tregex:  /[0-9 -()+]+$/,\n\t\tvalidate: function(num) {\n\t\t\treturn (num.number.length === num.length) && (this.regex.test(num.number));\n\t\t},\n\t\tmessage: '{title} is not valid',\n\t\texpects: false\n\t},\n\n\tusername: {\n\t\tregex: /[@]+/gi,\n\t\tvalidate: function(uname) {\n\t\t\tuname= uname || '';\n\t\t\treturn !this.regex.test(uname);\n\t\t},\n\t\tmessage: '{title} is not a valid username',\n\t\texpects: false,\n\t},\n\n\t/**\n\t * Checks if a value is present.\n\t */\n\trequired: {\n\t\tvalidate: function(value) {\n\t\t\treturn !!value;\n\t\t},\n\t\tmessage: '{title} is required',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value is a valid email address.\n\t */\n\temail: {\n\t\tregex: /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i, // eslint-disable-line no-control-regex\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} must be a valid email address',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value is a valid web address.\n\t */\n\turl: {\n\t\tregex: /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/i,\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} must be a valid web address',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value contains both letters and numbers.\n\t */\n\talphaNumeric: {\n\t\tregex: /^[A-Za-z0-9]+$/i,\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} may only contain [A-Za-z] and [0-9]',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value contains only numbers.\n\t */\n\tnumeric: {\n\t\tregex: /^-?[0-9]+$/,\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} may only contain [0-9]',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value contains only letters.\n\t */\n\talpha: {\n\t\tregex: /^[A-Za-z]+$/,\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} may only contain [A-Za-z]',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value is a valid decimal.\n\t */\n\tdecimal: {\n\t\tregex: /^\\s*(\\+|-)?((\\d+(\\.\\d+)?)|(\\.\\d+))\\s*$/,\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} must be a valid decimal',\n\t\texpects: false\n\t},\n\t/**\n\t * Similar to 'decimal', but for currency values.\n\t */\n\tcurrency: {\n\t\tregex: /^\\s*(\\+|-)?((\\d+(\\.\\d\\d)?)|(\\.\\d\\d))\\s*$/,\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} must be a valid currency value',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value is a valid ipv4 or ipv6 address.\n\t */\n\tip: {\n\t\tregex: {\n\t\t\tipv4: /^(?:(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])$/,\n\t\t\tipv4Cidr: /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\/([0-9]|[1-2][0-9]|3[0-2]))$/,\n\t\t\tipv6: /^((?=.*::)(?!.*::.+::)(::)?([\\dA-F]{1,4}:(:|\\b)|){5}|([\\dA-F]{1,4}:){6})((([\\dA-F]{1,4}((?!\\3)::|:\\b|$))|(?!\\2\\3)){2}|(((2[0-4]|1\\d|[1-9])?\\d|25[0-5])\\.?\\b){4})$/i,\n\t\t\tipv6Cidr: /^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))?$/\n\t\t},\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.ipv4.test(value) || this.regex.ipv6.test(value) || this.regex.ipv4Cidr.test(value) || this.regex.ipv6Cidr.test(value);\n\t\t},\n\t\tmessage: '{title} must be a valid IP address',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value is a minimum of n characters.\n\t */\n\tmin: {\n\t\tvalidate: function(value, pars) {\n\t\t\treturn typeof value === 'string' && value.length >= pars.min;\n\t\t},\n\t\tmessage: '{title} must be a minimum of {min} characters',\n\t\texpects: ['min']\n\t},\n\t/**\n\t * Checks if a value is a maximum of n characters.\n\t */\n\tmax: {\n\t\tvalidate: function(value, pars) {\n\t\t\treturn typeof value === 'string' && value.length <= pars.max;\n\t\t},\n\t\tmessage: '{title} must be a maximum of {max} characters',\n\t\texpects: ['max']\n\t},\n\t/**\n\t * Checks if a string's length or number is between a minimum and maximum.\n\t */\n\trange: {\n\t\tvalidate: function(value, pars) {\n\t\t\tif (typeof value === 'string')\n\t\t\t{\n\t\t\t\treturn value.length >= pars.min && value.length <= pars.max;\n\t\t\t} else if (typeof value === 'number') {\n\t\t\t\treturn value >= pars.min && value <= pars.max;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tmessage: '{title} must be a minimum of {min} and a maximum of {max} characters',\n\t\texpects: ['min', 'max']\n\t},\n\t/**\n\t * Checks if a value is the same as the value of another.\n\t */\n\tequal: {\n\t\tvalidate: function(value, pars) {\n\t\t\treturn '' + value === '' + pars.value;\n\t\t},\n\t\tmessage: '{title} must be equal to {field}',\n\t\texpects: ['value', 'field']\n\t},\n\t/**\n\t * Checks if a value passes a given regular expression.\n\t */\n\tformat: {\n\t\tvalidate: function(value, pars) {\n\t\t\tif (Object.prototype.toString.call(pars.regex) === '[object RegExp]') {\n\t\t\t\treturn pars.regex.test(value);\n\t\t\t}\n\t\t\tthrow 'approve.value(): [format] - regex is not a valid regular expression.';\n\t\t},\n\t\tmessage: '{title} did not pass the [{regex}] test',\n\t\texpects: ['regex']\n\t},\n\t/**\n\t * Checks if a value is a valid time string (hh:mm:ss).\n\t */\n\ttime: {\n\t\tregex: /^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} is not a valid time',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value is a valid date.\n\t */\n\tdate: {\n\t\tformats: {\n\t\t\tymd: /^(?:\\2)(?:[0-9]{2})?[0-9]{2}([\\/-])(1[0-2]|0?[1-9])([\\/-])(3[01]|[12][0-9]|0?[1-9])$/,\n\t\t\tdmy: /^(3[01]|[12][0-9]|0?[1-9])([\\/-])(1[0-2]|0?[1-9])([\\/-])(?:[0-9]{2})?[0-9]{2}$/\n\t\t},\n\t\tvalidate: function(value, pars) {\n\t\t\treturn this.formats[pars.format].test(value);\n\t\t},\n\t\tmessage: '{title} is not a valid date',\n\t\texpects: ['format']\n\t},\n\t/**\n\t * Checks if a value is truthy ('yes', 'true', 'ok[ay]', '1').\n\t */\n\ttruthy: {\n\t\tregex: /^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/i,\n\t\tvalidate: function(value) {\n\t\t\treturn this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} is not valid',\n\t\texpects: false\n\t},\n\t/**\n\t * Checks if a value is falsy ('No', 'false', '0').\n\t */\n\tfalsy: {\n\t\tregex: /^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/i,\n\t\tvalidate: function(value) {\n\t\t\treturn !this.regex.test(value);\n\t\t},\n\t\tmessage: '{title} is not valid',\n\t\texpects: false\n\t},\n\tcc: cc,\n\tstrength: strength\n};\n\nvar Result = function() {\n    this.approved = true;\n    this.errors = [];\n    this.failed = [];\n    // Provides easy access to the loop for the errors.\n    this.each = function(callback) {\n        var isFunc = callback && callback.constructor && callback.call && callback.apply,\n            i = this.errors.length;\n        while (i--) {\n            if (isFunc) {\n                callback(this.errors[i]);\n            }\n        }\n    };\n    // Provides easy access to the loop for a test's errors.\n    this.filter = function(test, callback) {\n    \tvar isFunc = callback && callback.constructor && callback.call && callback.apply,\n    \t\ti = 0;\n    \tif (this.hasOwnProperty(test)) {\n    \t\ti = this[test].errors.length;\n    \t\twhile (i--) {\n\t            if (isFunc) {\n\t                callback(this[test].errors[i]);\n\t            }\n\t        }\n    \t}\n    };\n};\n\n/** @constructor */\nvar approve = {\n\t/**\n\t * Default tests.<br>\n\t */\n\ttests: tests,\n\t/**\n\t * A helper function for formatting strings.\n\t */\n\t_format: function(text, col) {\n\t    col = typeof col === 'object' ? col : Array.prototype.slice.call(arguments, 1);\n\t    return text.replace(/\\{\\{|\\}\\}|\\{(\\w+)\\}/g, function (m, n) {\n\t        if (m === \"{{\") { return \"{\"; }\n\t        if (m === \"}}\") { return \"}\"; }\n\t        return col[n];\n\t    }).trim();\n\t},\n\t/**\n\t * Checks whether the given rule is not a config property.\n\t */\n\t_isRule: function(rule) {\n\t\tvar props = [\n\t\t\t'title',\n\t\t\t'stop'\n\t\t];\n\t\treturn props.indexOf(rule) < 0;\n\t},\n\t/**\n\t * The start of the validation process.\n\t */\n\t_start: function(value, rules) {\n\t    // Instantiate a result object.\n\t    var result = new Result(),\n\t        // This is used to format the message with the value title.\n\t        title = '',\n\t        // When true, tests will not continue after first failed test.\n\t        stop = false;\n\t    // Check if the rule has a title property?\n\t    if (rules.hasOwnProperty('title')) {\n\t        title = rules.title;\n\t    }\n\t    // Check if the rule has a stop property?\n\t    if (rules.hasOwnProperty('stop')) {\n\t        stop = rules.stop;\n\t    }\n\t    // Loop through given rules.\n\t    for (var rule in rules) {\n\t    \t// Stop validating after each failed test\n\t    \tif (stop && !result.approved) {\n\t    \t\tbreak;\n\t    \t}\n\t        if (rules.hasOwnProperty(rule) && this._isRule(rule)) {\n\t            var constraint = rules[rule];\n\t            // Check if rule exists in tests.\n\t            if (this.tests.hasOwnProperty(rule)) {\n\t                // Set a pointer to the current test.\n\t                var params = {\n\t                    constraint: constraint,\n\t                    rule: rule,\n\t                    title: title,\n\t                    test: this.tests[rule],\n\t                    value: value\n\t                };\n\t                this._test(params, result);\n\t            } else {\n\t                throw 'approve.value(): ' + rule + ' test not defined.';\n\t            }\n\t        }\n\t    }\n\n\t    return result;\n\t},\n\t/**\n\t * Performs the actual testing of the value and returns the result including any errors.\n\t */\n\t_test: function(params, result) {\n\t    // Create an args object for required parameters.\n\t    var args = this._getArgs(params),\n\t        // Test the value.\n\t        ret = params.test.validate(params.value, args);\n\n\t    result[params.rule] = {\n\t    \tapproved: true,\n\t    \terrors: []\n\t    };\n\t    // Check if the returned value is an object.\n\t    if(typeof ret === 'object')\n\t    {\n\t        // An object was returned.\n\t        // Check if the test was successful.\n\t        result.approved = !ret.valid ? false : result.approved;\n\t        result[params.rule].approved = ret.valid;\n\t        // Add the error messages returned by the resluting object.\n\t        if (ret.hasOwnProperty('errors')) {\n\t        \tvar messages = this._formatMessages(ret.errors, params);\n\t            result.errors = result.errors.concat(messages);\n\t            result[params.rule].errors = messages;\n\t        }\n\t        // Merge any properties from the resulting object with the main result to be returned.\n\t        for (var prop in ret) {\n\t            if (ret.hasOwnProperty(prop) && !result.hasOwnProperty(prop)) {\n\t                result[params.rule][prop] = ret[prop];\n\t            }\n\t        }\n\t    } else if (typeof ret !== 'boolean') {\n\t        // We don't process if it's not a boolean or object.\n\t        throw 'approve.value(): ' + params.rule + ' returned an invalid value';\n\t    } else {\n\t        result.approved = !ret ? false : result.approved;\n\t        result[params.rule].approved = ret;\n\t    }\n\t    if (!result.approved) {\n\t    \tvar message = this._formatMessage(params);\n\t        result.errors.push(message);\n\t        result[params.rule].errors.push(message);\n\t    }\n\t    if (!ret.valid) {\n        \tresult.failed.push(params.rule);\n        }\n\t},\n\t/**\n\t * Helper method to loop over expected test parameters.\n\t */\n\t_eachExpected: function(params, fn) {\n\t    if (Array.isArray(params.test.expects)) {\n\t        var expectsLength = params.test.expects.length,\n\t            i = expectsLength;\n\t        // This test expects paramaters.\n\t        // Loop through the test's expected parameters and call the given function.\n\t        while (i--) {\n\t            fn(params.test.expects[i], expectsLength);\n\t        }\n\t    }\n\t},\n\t/**\n\t * Returns an object containing the arguments for a test's expected parameters.\n\t */\n\t_getArgs: function(params) {\n\t    var pars = {};\n\t    // Does the test for this rule expect any paramaters?\n\t    this._eachExpected(params, function(expects, expectsLength) {\n\t        // Check if the rule object has the required parameter.\n\t        if (params.constraint.hasOwnProperty(expects)) {\n\t            // Add the expected parameter value to the pars object.\n\t            pars[expects] = params.constraint[expects];\n\t        } else if (expectsLength <= 1 && /^[A-Za-z0-9]+$/i.test(params.constraint)) {\n\t            // Set the parameter to the rule's value.\n\t            pars[expects] = params.constraint;\n\t        } else {\n\t            throw 'approve.value(): ' + params.rule + ' expects the ' + expects + ' parameter.';\n\t        }\n\t    });\n\n\t    // Does the rule have config?\n\t    if (params.constraint.hasOwnProperty('config')) {\n\t        // Add the config to the pars object.\n\t        pars.config = params.constraint.config;\n\t    }\n\t    // Return the parameters object\n\t    return pars;\n\t},\n\t/**\n\t * Returns an object containing placholder values to correctly format an error message.\n\t */\n\t_getFormat: function(params) {\n\t    var format = {};\n\t    // Does the test for the rule expect parameters?\n\t    this._eachExpected(params, function(expects) {\n\t        // Check if the rule object has the required parameter.\n\t        if (params.constraint.hasOwnProperty(expects)) {\n\t            // Add the expected parameter's format to the parameter value.\n\t            format[expects] = params.constraint[expects];\n\t        }\n\t        // Expected parameter not present, is the constraint formattable?\n\t        if (/^[A-Za-z0-9]+$/i.test(params.constraint)) {\n\t            format[expects] = params.constraint;\n\t        }\n\t    });\n\t    format.title = params.title;\n\t    // Return the formatted message.\n\t    return format;\n\t},\n\t/**\n\t * Returns an array of formatted error messages returned by tests that return objects instead of booleans.\n\t */\n\t_formatMessages: function(errors, params) {\n\t    var format = this._getFormat(params),\n\t        i = errors.length;\n\t    while (i--) {\n\t        errors[i] = this._format(errors[i], format);\n\t    }\n\t    return errors;\n\t},\n\t/**\n\t * Returns the correctly formatted message representing the current test's failure.\n\t */\n\t_formatMessage: function(params) {\n\t    var format = this._getFormat(params);\n\t    var message;\n\n\t    // Does the provided rule have a custom message?\n\t    if (params.constraint.hasOwnProperty('message')) {\n\t        // The rule has a custom message, return it.\n\t        message = params.constraint.message;\n\t        return this._format(message, format);\n\t    }\n\t    else {\n\t        // The rule does not have a custom message.\n\t        // Get the default message from the tests.\n\t        message = params.test.message;\n\t        return this._format(message, format);\n\t    }\n\t},\n\t/**\n\t * Executes the tests based on given rules to validate a given value.\n\t */\n\tvalue: function(value, rules) {\n\n\t    // If rules is not an object, we cannot continue.\n\t    if (typeof rules !== 'object') {\n\t        throw 'approve.value(value, rules): rules is not a valid object.';\n\t    }\n\t    // Return the result object.\n\t    return this._start(value, rules);\n\t},\n\t/**\n\t * Used to add custom tests.\n\t */\n\taddTest: function(obj, name) {\n\t    // If obj is not a valid object, we cannot continue.\n\t    if (typeof obj !== 'object') {\n\t        throw 'approve.addTest(obj, name): obj is not a valid object.';\n\t    }\n\t    try {\n\t        // Check if the test name already exists.\n\t        if (!this.tests.hasOwnProperty(name)) {\n\t            // The name does not exist, add it to the tests.\n\t            this.tests[name] = obj;\n\t        }\n\t    } catch (e) {\n\t        throw 'approve.addTest(): ' + e.message;\n\t    }\n\t}\n};\n\nreturn approve;\n\n})));\n"]}